
<!DOCTYPE html>
<!--[if IE 9]>         <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html>         <!--<![endif]-->
  <head>
  <title>High-availability pairs | NetApp Cloud Docs</title>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="encoding" content="utf-8">
  <meta name="description" content="">
  <meta name="keywords" content=" high availability, HA, mediator, concepts, understanding, overview, availability zones, AZs, takeover, giveback, rpo, rto, floating ip">

  <!-- Icons -->
  <link rel="icon" href="/occm/en/images/favicon.ico" type="image/x-icon">
  <!-- <link rel="icon" href="http://media.netapp.com/designimages/favicon.ico" type="image/x-icon"> -->

  <!-- CSS - 403 Forbidden
  <link rel="stylesheet" href="//cloud.typography.com/6091132/651206/css/fonts.css"> -->

  <!-- LUCI CSS Content -->
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/bower_components/eightshapes-blocks/dist/esb.min.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/netapp-library/css/netapp-library.min.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/css/doc.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/css/doc-components.css">

  <!--<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">-->
  <!-- Font awesome seems to affect our GitHub Icon and generic "arrow box" for external links. -->
  <link rel="stylesheet" type="text/css" href="/occm/en/css/font-awesome.min.css">
  <link rel="stylesheet" href="/occm/en/css/customstyles.css">
  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/occm/en/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel='stylesheet' href='/occm/en/css/netapp.css' type='text/css'>

  <!-- Controls the Sidebar layout -->
  <link rel="stylesheet" href="/occm/en/css/na-sidebar.css">

  <!-- Controls the custom layout of the site -->
  <link rel='stylesheet' href='/occm/en/css/clouddocs.css' type='text/css'>
  <script src='/occm/en/js/clouddocs.js'></script>

  <!-- <script src="/occm/en/common/js/jquery.min.js"></script>
  <script src="/occm/en/js/jquery.cookie.min.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="/occm/en/js/jquery.navgoco.min.js"></script>
  <!-- <script src="/occm/en/js/bootstrap.min.js"></script>
  <script src="/occm/en/js/anchor.min.js"></script> -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
  <script src="/occm/en/js/toc.js"></script>
  <script src="/occm/en/js/customscripts.js"></script>

  <script>
      $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
              caretHtml: '',
              accordion: true,
              openClass: 'active', // open
              save: false, // leave false or nav highlighting doesn't work right
              cookie: {
                  name: 'navgoco',
                  expires: false,
                  path: '/'
              },
              slide: {
                  duration: 400,
                  easing: 'swing'
              }
          });

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(function () {
          $('[data-toggle="tooltip"]').tooltip()
      })
  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    var supportedLangs = [];
    
      supportedLangs.push("zz");
    
      supportedLangs.push("en");
    

    var langs = navigator.languages;
    var loc = window.location.href;
    var breakFlag = false;

    for (var a = 0; a < supportedLangs.length; a++) {
      if(loc.includes("/"+supportedLangs[a]+"/")) {
        breakFlag = true;
        break;
      }
    }

    if (breakFlag === false) {
      for (var s = 0; s < langs.length; s++) {

        if (supportedLangs.indexOf(langs[s]) == -1) {
          continue;
        }

        window.location = langs[s]+'/';

        breakFlag = true;
        break;
      }

      if (breakFlag === false) {
        window.location = 'en/';
      }
    }
  </script>
</head>


  <body class="n-doc__component-detail">
    <a href="#n-main-content" class="visually-hidden">Skip to main content</a>
<div class="n-off-canvas-menu">
  <div class="n-off-canvas-menu__menu">
    <div class="n-off-canvas-menu__menu-inner">
      <div class="n-off-canvas-menu__property-title">NetApp Cloud Docs</div>
      <ul class="n-off-canvas-menu__property-navigation-list">
        <li class="n-off-canvas-menu__property-navigation-list-item ">
          <a href="http://clouddocs.netapp.com" class="n-off-canvas-menu__property-navigation-link">
            Home
          </a>
          <div class="n-off-canvas-menu__child-menu">
            <ul class="n-menu__list">

            </ul>
          </div>
        </li>
      </ul>

      <ul class="n-off-canvas-menu__global-navigation-list">
         <li class="n-off-canvas-menu__global-navigation-list-header">More From NetApp</li>
         <li class="n-off-canvas-menu__global-navigation-list-item"><a href="#" class="n-off-canvas-menu__global-navigation-link">Netapp.com</a></li>
      </ul>
    </div>
  </div>
</div>

    <div class="n-off-canvas-menu__content-wrap">
      <!-- Header -->
      <header>
  <!-- Top Hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
            <li class="n-top-hat__list-item">
              <a href="http://www.netapp.com" class="n-top-hat__link">NetApp.com</a>
            </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Property Bar -->
  <div class="n-property-bar n-property-bar--v3">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link"><span class="n-property-bar__menu-toggle-text">Menu</span><svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
          <title>bars</title>
          <use xlink:href="/occm/en/common/svg/sprite.svg#bars"></use>
        </svg></a>
      </div>
      <div class="n-property-bar__property-mark n-property-bar__property-mark--has-property-name">
        <a class="n-property-bar__property-link" href="http://clouddocs.netapp.com">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/occm/en/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg viewBox="0 0 1008 181.537" class="n-property-bar__logo-svg" aria-labelledby="title">
              <title>NetApp</title>
              <use xlink:href="/occm/en/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
          <h2 class="n-property-bar__property-name">Cloud Docs</h2>
        </a>
      </div>

      <!-- NetApp Search Bar -->
      
      <div id="search-demo-container" class="n-property-bar__search">
        <input type="text" id="search-input" class="n-search-form__input" placeholder="Search Documentation">
        <ul id="results-container"></ul>
        <script src="/occm/en/js/jekyll-search.js" type="text/javascript"></script>

      <script type="text/javascript">
      window.simpleJekyllSearch = new SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/occm/en/search.json',
        searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
        noResultsText: 'No results found',
        limit: 10,
        fuzzy: false,
        exclude: ['Welcome']
      })
    </script>

      </div>
      

      <div id="ie-i18n-menu" class="n-property-bar__utils">
        <ul class="n-property-navigation-bar__utils-list">
          <li class="n-property-navigation-bar__utils-list-item">
            <a href="#" class="n-property-navigation-bar__utils-link n-property-navigation-bar__nav-link n-property-navigation-bar__language-selector-toggle" data-menu-id="n-property-navigation-bar__menu--language-selector">
              <svg class="n-icon-globe n-globe__icon" aria-labelledby="title">
                <title>globe</title>
                <use xlink:href="/occm/en/common/svg/sprite.svg#globe"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
      <!-- End NetApp Search Bar -->
    </div>

    <div class="n-property-bar__menus">
      <div id="n-property-navigation-bar__menu--language-selector" class="n-menu n-menu--v3">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list">
                <li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="/occm/en" class="n-menu__header-text">English</a href="/occm/en">
                </li>
                
                  <li class="n-menu__list-item n-menu__list-item--level-1">
                    <a target="_blank" href="http://docs.netapp.com/occm/topic/com.netapp.nav.occm-330/home.html?lang=ja" class="n-menu__header-text">日本語</a>
                  </li>
                
              </ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: en
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


      <!-- Content -->
      <main role="main" id="n-main-content" class="n-main-content">
        <div class="n-container">
          <div class="n-row">
            <div class="n-doc n-doc__component-list">
              <!-- Sidebar Column -->
              
              <div class="col-md-3" >
                  

<ul id="mysidebar" class="nav">
  

  
    <li><a href="index.html">Cloud Manager 3.4 docs</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Getting started</a>
      <ul>
        

  
    <li><a href="reference_deployment_overview.html">Overview</a></li>
  

  
    <li><a href="task_getting_started_aws.html">Getting started in AWS</a></li>
  

  
    <li><a href="task_getting_started_azure.html">Getting started in Azure</a></li>
  

  
    <li><a href="task_setting_up_cloud_manager.html">Setting up Cloud Manager</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Detailed networking requirements</a>
      <ul>
        

  
    <li><a href="reference_networking_aws.html">AWS networking requirements</a></li>
  

  
    <li><a href="reference_networking_azure.html">Azure networking requirements</a></li>
  

  
    <li><a href="reference_networking_ibm.html">IBM Cloud networking requirements</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Additional installation options</a>
      <ul>
        

  
    <li><a href="reference_cloud_mgr_reqs.html">Cloud Manager host requirements</a></li>
  

  
    <li><a href="task_granting_aws_permissions.html">Granting permissions when Cloud Manager is not launched from Cloud Central</a></li>
  

  
    <li><a href="task_launching_aws_mktp.html">Launching Cloud Manager from the AWS Marketplace</a></li>
  

  
    <li><a href="task_installing_linux.html">Installing Cloud Manager on a Linux host</a></li>
  

  
    <li><a href="task_installing_azure_gov.html">Intalling Cloud Manager in Azure Gov</a></li>
  

  
    <li><a href="task_installing_azure_germany.html">Installing Cloud Manager in Azure Germany</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Concepts</a>
      <ul>
        

  
    <li><a href="concept_overview.html">Product overview</a></li>
  

  
    <li><a href="concept_storage.html">Storage</a></li>
  

  
    <li class="active"><a href="concept_ha.html">High-availability pairs</a></li>
  

  
    <li><a href="concept_security.html">Security</a></li>
  

  
    <li><a href="concept_licensing.html">Licensing</a></li>
  

  
    <li><a href="concept_performance.html">Performance</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Deploying ONTAP Cloud</a>
      <ul>
        

  
    <li><a href="reference_before.html">Before you begin</a></li>
  

  
    <li><a href="task_logging_in.html">Logging in to Cloud Manager</a></li>
  

  
    <li><a href="task_planning_your_config.html">Planning your configuration</a></li>
  

  
    <li><a href="task_deploying_otc_aws.html">Launching ONTAP Cloud in AWS</a></li>
  

  
    <li><a href="task_deploying_otc_azure.html">Launching ONTAP Cloud in Azure</a></li>
  

  
    <li><a href="task_registering.html">Registering pay-as-you-go systems</a></li>
  

  
    <li><a href="task_setting_up_ontap_cloud.html">Setting up ONTAP Cloud</a></li>
  

  
    <li><a href="task_provisioning_storage.html">Provisioning storage</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Managing ONTAP Cloud</a>
      <ul>
        

  
    <li><a href="task_managing_storage.html">Managing storage</a></li>
  

  
    <li><a href="task_updating_ontap_cloud.html">Updating ONTAP Cloud software</a></li>
  

  
    <li><a href="task_modifying_ontap_cloud.html">Modifying ONTAP Cloud systems</a></li>
  

  
    <li><a href="task_connecting_to_otc.html">Connecting to ONTAP Cloud systems</a></li>
  

  
    <li><a href="task_monitoring_costs.html">Monitoring AWS costs</a></li>
  

  
    <li><a href="task_adding_ontap_cloud.html">Adding existing ONTAP Cloud systems</a></li>
  

  
    <li><a href="task_deleting_working_env.html">Deleting ONTAP Cloud systems</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Managing data across a hybrid cloud</a>
      <ul>
        

  
    <li><a href="task_discovering_ontap.html">Discovering and managing ONTAP clusters</a></li>
  

  
    <li><a href="task_replicating_data.html">Replicating data to and from the cloud</a></li>
  

  
    <li><a href="task_syncing_s3.html">Syncing data to AWS S3</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Provisioning NFS volumes</a>
      <ul>
        

  
    <li><a href="task_changing_volume_view.html">Changing to the Volume View</a></li>
  

  
    <li><a href="task_provisioning_volume_view.html">Creating and mounting NFS volumes</a></li>
  

  
    <li><a href="task_managing_volume_view.html">Managing NFS volumes</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Administering Cloud Manager</a>
      <ul>
        

  
    <li><a href="task_updating_cloud_manager.html">Updating Cloud Manager</a></li>
  

  
    <li><a href="task_migrating_to_portal.html">Migrating to NetApp Cloud Central</a></li>
  

  
    <li><a href="task_backing_up_restoring.html">Backing up and restoring</a></li>
  

  
    <li><a href="task_removing.html">Removing ONTAP Cloud working environments</a></li>
  

  
    <li><a href="task_editing_users.html">Editing user accounts</a></li>
  

  
    <li><a href="task_managing_encryption.html">Managing encryption settings</a></li>
  

  
    <li><a href="task_renewing_cert.html">Renewing the HTTPS certificate</a></li>
  

  
    <li><a href="task_uninstalling.html">Uninstalling Cloud Manager</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Reference</a>
      <ul>
        

  
    <li><a href="reference_new_occm.html">What's new in Cloud Manager</a></li>
  

  
    <li><a href="reference_new_otc.html">What's new in ONTAP Cloud</a></li>
  

  
    <li><a href="reference_apis.html">REST APIs</a></li>
  

  
    <li><a href="reference_default_configs.html">Default configurations</a></li>
  

  
    <li><a href="reference_permissions.html">Permissions</a></li>
  

  
    <li><a href="reference_security_groups.html">Security group rules</a></li>
  

  
    <li><a href="reference_user_roles.html">User roles</a></li>
  

  
    <li><a href="reference_additional_info.html">Related links</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="reference_earlier_versions.html">Earlier versions</a></li>
  


</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

              </div>
              

              <div class="n-doc__component-detail-content n-doc__component-detail-content--show-code">

              <!-- Begin of page container -->
              <div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">High-availability pairs
    <span>
      
        <a target="_blank" href="https://github.com/NetAppDocs/occm/blob/master/concept_ha.adoc" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
      
    </span>
  </h1>
</div>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>An ONTAP Cloud high availability (HA) configuration provides nondisruptive operations and fault tolerance. HA pairs are supported in AWS only.</p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#ontap-cloud-ha-in-multiple-availability-zones">ONTAP Cloud HA in multiple Availability Zones</a></li>
<li><a href="#ontap-cloud-ha-in-a-single-availability-zone">ONTAP Cloud HA in a single Availability Zone</a></li>
<li><a href="#how-storage-works-in-an-ontap-cloud-ha-pair">How storage works in an ONTAP Cloud HA pair</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ONTAP Cloud HA configurations include the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two ONTAP Cloud systems (nodes) whose data is synchronously mirrored between each other.</p>
</li>
<li>
<p>A mediator instance that provides a communication channel between the nodes to assist in storage takeover and giveback processes.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The mediator instance runs the Linux operating system on a t2.micro instance and uses one EBS magnetic disk that is approximately 8 GB.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="storage-takeover-and-giveback">Storage takeover and giveback</h3>
<div class="paragraph">
<p>If a node goes down, the other node can serve data for its partner to provide continued data service. Clients can access the same data from the partner node because the data was synchronously mirrored to the partner.</p>
</div>
<div class="paragraph">
<p>After the node reboots, the partner must resync data before it can return the storage. The time that it takes to resync data depends on how much data was changed while the node was down.</p>
</div>
</div>
<div class="sect2">
<h3 id="rpo-and-rto">RPO and RTO</h3>
<div class="paragraph">
<p>An ONTAP Cloud HA configuration maintains high availability of your data as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The recovery point objective (RPO) is 0 seconds.<br>
Your data is transactionally consistent with no data loss.</p>
</li>
<li>
<p>The recovery time objective (RTO) is 60 seconds.<br>
In the event of an outage, data should be available in 60 seconds or less.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ha-deployment-models">HA deployment models</h3>
<div class="paragraph">
<p>You can ensure the high availability of your data by deploying an ONTAP Cloud HA configuration across multiple Availability Zones (AZs) or in a single AZ.</p>
</div>
<div class="paragraph">
<p>You should review more details about each configuration to choose which best fits your needs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ontap-cloud-ha-in-multiple-availability-zones">ONTAP Cloud HA in multiple Availability Zones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deploying an ONTAP Cloud HA configuration in multiple Availability Zones (AZs) ensures high availability of your data if a failure occurs with an AZ or an instance that runs an ONTAP Cloud node. You should understand how NAS IP addresses impact data access and storage failover.</p>
</div>
<div class="sect2">
<h3 id="nfs-and-cifs-data-access-for-clients-within-the-vpc">NFS and CIFS data access for clients within the VPC</h3>
<div class="paragraph">
<p>When an ONTAP Cloud HA configuration is spread across multiple Availability Zones, three floating IP addresses are required for NAS data access from within the VPC. The floating IP addresses, which must be outside of the CIDR blocks for all VPCs in the region, can migrate between nodes when failures occur.</p>
</div>
<div class="paragraph">
<p>These floating IP addresses are not natively accessible to clients that are outside of the VPC.</p>
</div>
<div class="paragraph">
<p>You should review requirements for floating IP addresses and route tables before you deploy an HA configuration across multiple Availability Zones. You must specify the floating IP addresses when you deploy the configuration.</p>
</div>
<div class="paragraph">
<p><a href="reference_networking_aws.html#networking-requirements-for-ontap-cloud-ha-in-multiple-azs">Networking requirements for ONTAP Cloud HA in multiple AZs</a></p>
</div>
</div>
<div class="sect2">
<h3 id="nfs-and-cifs-data-access-for-clients-outside-the-vpc">NFS and CIFS data access for clients outside the VPC</h3>
<div class="paragraph">
<p>When deployed in multiple AZs, ONTAP Cloud HA includes a separate set of IP addresses for NAS clients that are outside of the VPC. These IP addresses are static—they cannot migrate between nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="iscsi-data-access">iSCSI data access</h3>
<div class="paragraph">
<p>Cross-VPC data communication is not an issue since iSCSI does not use floating IP addresses.</p>
</div>
</div>
<div class="sect2">
<h3 id="storage-takeover-and-giveback-for-iscsi">Storage takeover and giveback for iSCSI</h3>
<div class="paragraph">
<p>For iSCSI, ONTAP Cloud uses multipath I/O (MPIO) and Asymmetric Logical Unit Access (ALUA) to manage path failover between the active-optimized and non-optimized paths.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For information about which specific host configurations support ALUA, see the <a href="http://mysupport.netapp.com/matrix" target="_blank" rel="noopener">NetApp Interoperability Matrix Tool</a> and the Host Utilities Installation and Setup Guide for your host operating system.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="storage-takeover-and-giveback-for-nas">Storage takeover and giveback for NAS</h3>
<div class="paragraph">
<p>When takeover occurs in a NAS configuration using floating IPs, the node&#8217;s floating IP address that clients use to access data moves to the other node. The following image depicts storage takeover in a NAS configuration using floating IPs. If node 2 goes down, the floating IP address for node 2 moves to node 1.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/diagram_takeover_giveback.png" alt="Conceptual image showing storage takeover in an ONTAP Cloud HA pair: the floating IP addresses from node 1 move to node 2."></span></p>
</div>
<div class="paragraph">
<p>NAS data IPs used for external VPC access cannot migrate between nodes if failures occur. If a node goes offline, you must manually remount volumes to clients outside the VPC by using the IP address on the other node.</p>
</div>
<div class="paragraph">
<p>After the failed node comes back online, remount clients to volumes using the original IP address. This step is needed to avoid transferring unnecessary data between two HA nodes, which can cause significant performance and stability impact.</p>
</div>
<div class="paragraph">
<p>You can easily identify the correct IP address from Cloud Manager by selecting the volume and clicking <strong>Mount Command</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ontap-cloud-ha-in-a-single-availability-zone">ONTAP Cloud HA in a single Availability Zone</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deploying an ONTAP Cloud HA configuration in a single Availability Zone (AZ) can ensure high availability of your data if an instance that runs an ONTAP Cloud node fails. All data is natively accessible from outside of the VPC.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This HA configuration is not supported in the Volume View.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="data-access">Data access</h3>
<div class="paragraph">
<p>Because this configuration is in a single AZ, it does not require floating IP addresses. You can use the same IP address for data access from within the VPC and from outside the VPC.</p>
</div>
<div class="paragraph">
<p>The following image shows an HA configuration in a single AZ. Data is accessible from within the VPC and from outside the VPC.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/diagram_single_az.png" alt="Conceptual image that shows an ONTAP HA configuration in a single Availability Zone that allows data access from outside of the VPC."></span></p>
</div>
</div>
<div class="sect2">
<h3 id="storage-takeover-and-giveback-2">Storage takeover and giveback</h3>
<div class="paragraph">
<p>For iSCSI, ONTAP Cloud uses multipath I/O (MPIO) and Asymmetric Logical Unit Access (ALUA) to manage path failover between the active-optimized and non-optimized paths.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For information about which specific host configurations support ALUA, see the <a href="http://mysupport.netapp.com/matrix" target="_blank" rel="noopener">NetApp Interoperability Matrix Tool</a> and the Host Utilities Installation and Setup Guide for your host operating system.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For NAS configurations, the data IP addresses can migrate between HA nodes if failures occur. This ensures client access to storage.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-storage-works-in-an-ontap-cloud-ha-pair">How storage works in an ONTAP Cloud HA pair</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unlike an ONTAP cluster, storage in an ONTAP Cloud HA pair is not shared between nodes. Instead, data is synchronously mirrored between the nodes so that the data is available in the event of failure.</p>
</div>
<div class="sect2">
<h3 id="storage-allocation">Storage allocation</h3>
<div class="paragraph">
<p>When you create a new volume and additional disks are required, Cloud Manager allocates the same number of disks to both nodes, creates a mirrored aggregate, and then creates the new volume. For example, if two disks are required for the volume, Cloud Manager allocates two disks per node for a total of four disks.</p>
</div>
</div>
<div class="sect2">
<h3 id="storage-configurations">Storage configurations</h3>
<div class="paragraph">
<p>You can use an ONTAP Cloud HA pair as an active-active configuration, in which both nodes serve data to clients, or as an active-passive configuration, in which the passive node responds to data requests only if it has taken over storage for the active node.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can set up an active-active configuration only when using Cloud Manager in the Storage System View.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="performance-expectations-for-an-ontap-cloud-ha-configuration">Performance expectations for an ONTAP Cloud HA configuration</h3>
<div class="paragraph">
<p>An ONTAP Cloud HA configuration synchronously replicates data between nodes, which consumes network bandwidth. As a result, you can expect the following performance in comparison to a single-node ONTAP Cloud configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For HA configurations that serve data from only one node, read performance is comparable to the read performance of a single-node configuration, whereas write performance is lower.</p>
</li>
<li>
<p>For HA configurations that serve data from both nodes, read performance is higher than the read performance of a single-node configuration, and write performance is the same or higher.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://www.netapp.com/us/media/tr-4383.pdf" target="_blank" rel="noopener">NetApp Technical Report 4383: Performance Characterization of ONTAP Cloud with Application Workloads</a></p>
</div>
</div>
<div class="sect2">
<h3 id="client-access-to-storage">Client access to storage</h3>
<div class="paragraph">
<p>Clients should access NFS and CIFS volumes by using the data IP address of the node on which the volume resides. If NAS clients access a volume by using the IP address of the partner node, traffic goes between both nodes, which reduces performance.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you move a volume between nodes in an HA pair, you should remount the volume by using the IP address of the other node. Otherwise, you can experience reduced performance. If clients support NFSv4 referrals or folder redirection for CIFS, you can enable those features on the ONTAP Cloud systems to avoid remounting the volume. For details, see ONTAP documentation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can easily identify the correct IP address from Cloud Manager.</p>
</div>
<div class="paragraph">
<p>The following image shows the Storage System View:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_mount.gif" alt="Screen shot: Shows the Mount Command which is available when you select an ONTAP Cloud volume."></span></p>
</div>
<div class="paragraph">
<p>The following image shows the Volume View:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/screenshot_mount_volume_view.gif" alt="Screen shot: Shows the menu options for a volume" width="which includes the Mount option."></span></p>
</div>
</div>
</div>
</div>

              <!-- Page Container -->
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      
      <footer class="n-footer n-footer--v1" style="border-top: solid 10px #DFDFDF;">
        <!-- <div class="n-footer__top" style="padding-top: 29px;">
          <div class="n-container">
            <ul class="n-footer__corp-link-list">
              <li class="n-footer__corp-link-list-header">Resources</li>
              <li class="n-footer__corp-link-list-item"><a href="http://www.netapp.com//us/legal/netapptmlist.aspx" class="n-footer__corp-link">Trademarks</a></li>
              <li class="n-footer__corp-link-list-item"><a href="/occm/en/sitemap.xml" class="n-footer__corp-link">Site Map</a></li>
            </ul>
          </div>
        </div> -->
        <div class="n-footer__bottom">
          <div class="n-container">
            <div class="n-footer__bottom-left">
              <div class="n-footer__copyright">
                  <a href="//www.netapp.com/us/legal/copyright.aspx" class="n-footer__copyright-link">© 1994-2018 NetApp, Inc. All rights reserved.</a>
              </div>
              <div class="n-footer__copyright">
                <a href="//www.netapp.com/us/legal/netapptmlist.aspx" class="n-footer__copyright-link">Trademarks</a>
              </div>
              <div class="n-footer__social-links">
                <ul class="n-footer__social-link-list">
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-blog" href="http://blog.netapp.com" target="_blank" title="blog" alt="blog">
                      <span class="n-footer__social-link-text">blog</span>
                      <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                        <title>blog@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/en/common/svg/sprite.svg#blog"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-community" href="http://community.netapp.com/" target="_blank" title="community" alt="community">
                      <span class="n-footer__social-link-text">community</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>community@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/en/common/svg/sprite.svg#comments"></use>
                      </svg>
                    </a>
                  </li>

                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netappdoc" target="_blank" title="twitter" alt="twitter">
                      <span class="n-footer__social-link-text">twitter</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>twitter@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/en/common/svg/sprite.svg#twitter"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTechCommTV/" target="_blank" title="youtube" alt="youtube">
                      <span class="n-footer__social-link-text">youtube</span>
                      <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                        <title>youtube@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/occm/en/common/svg/sprite.svg#youtube"></use>
                      </svg>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="n-footer__bottom-right">
                <p class="n-footer__fine-print">
                    Have feedback for our website?
                    <a target="_self" href="javascript:netapp_mailto()">Let us know</a>
                </p>
            </div>
          </div>
        </div>
      </footer>

    </div>

    <script src="/occm/en/common/js/components.js"></script>
    <script src="/occm/en/common/js/doc-components.js"></script>

    <!-- i18n script -->
    <script src="/occm/js/responsive.js " type="text/javascript"></script>
  </body>
</html>
